# Notion 页面内容展示器（打字机 + 轮询 + 本地背景）

**类型:** feature  
**优先级:** normal  
**工作量:** medium  

---

## TL;DR

做一个本地项目：定时从 Notion 拉取指定 page 的内容，在页面上用打字机效果展示；仅在内容有更新时清空当前文本并重新打字；页面支持背景图且可更换，更换后的图片保存到本地并替换使用。

---

## 当前状态 vs 预期

| 当前 | 预期 |
|------|------|
| 无项目代码 | 单页应用：接入 Notion API，轮询指定 page |
| - | 获取到的内容用**打字机效果**逐字展示 |
| - | 每次拉取后**先比对内容是否变化**，有变化则清空当前展示再对新内容做打字机 |
| - | 页面有**背景图**，支持在界面中**更换背景**；上传的图片保存到本地（如本地文件或本地存储），替换当前背景 |

---

## 需求要点

- **Notion 接入**
  - 使用 Notion API 获取指定 page 内容（需 token + pageId）。
  - Page ID：`Reporter-Dash-3049166fd9fd80d0b8ecc9b2f87705c1`（可配置）。
  - Token 通过环境变量配置（如 `NOTION_API_TOKEN`），**不要写进代码或 issue**。
- **定时拉取**
  - 可配置轮询间隔（如默认 5 分钟），到点请求 Notion 获取 page 内容。
- **变更判断**
  - 对比本次与上次内容（如文本或 block 的 hash/指纹），仅当**有更新**时：清空当前页面展示的文本，再用打字机效果展示新内容。
- **打字机效果**
  - 新内容逐字/逐段在页面上打出，而不是整段一次性出现。
- **背景图**
  - 页面有背景图；提供入口（如上传或选择本地文件）更换背景。
  - 本地项目：上传/选择的图片保存到本地（如项目内 `public/` 或用户可选的本地路径），并替换当前背景图使用。

---

## 可能涉及的文件/模块（新建项目，待实现）

- 环境配置：`.env` 或 `.env.local`（NOTION_API_TOKEN、pageId、轮询间隔等）
- Notion 客户端：封装请求（如 `notion.js` / `services/notion.ts`）
- 轮询 + 变更检测：定时拉取、内容指纹/比对逻辑
- 打字机组件/逻辑：按字或按段渲染、速度可配置
- 背景图：上传/选择 UI、保存到本地、应用为页面背景
- 主页面：组合上述能力（背景 + 打字机区域 + 可选设置入口）

---

## 风险与备注

- **CORS**：浏览器直连 Notion API 可能遇到跨域，需本地代理或简单后端转发（如 Node 小服务或 Vite 代理）。
- **Notion 限流**：轮询间隔不宜过短，建议可配置且默认 ≥ 1 分钟。
- **Token 安全**：仅用环境变量，不提交到仓库、不写在 issue 里。
- **内容格式**：Notion 返回的是 block 结构，需约定如何转成“用于比对 + 用于展示”的纯文本或简单 HTML（影响变更判断和打字机展示）。

---

## 验收简要

- [ ] 配置 NOTION_API_TOKEN 与 pageId 后，能定时拉取到该 page 内容
- [ ] 内容有更新时，先清空再以打字机效果展示新内容；无更新则不打断当前展示
- [ ] 页面有背景图，可更换；新图保存到本地并生效
